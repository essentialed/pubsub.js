<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Pubsub.js by essentialed</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Pubsub.js</h1>
        <p>PubSub in JavaScript with topics, subtopics, and messages.</p>

        <p class="view"><a href="https://github.com/essentialed/pubsub.js">View the Project on GitHub <small>essentialed/pubsub.js</small></a></p>


        <ul>
          <li><a href="https://github.com/essentialed/pubsub.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/essentialed/pubsub.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/essentialed/pubsub.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="pubsubjs" class="anchor" href="#pubsubjs"><span class="octicon octicon-link"></span></a>pubsub.js</h1>

<blockquote>
<p>The Publish/Subscribe pattern uses a topic/event channel which sits between the objects wishing to receive notifications (subscribers) and the object firing the event (the publisher). This event system allows code to define application specific events which can pass custom arguments containing values needed by the subscriber. The idea here is to avoid dependencies between the subscriber and publisher.</p>
</blockquote>

<p><a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript">Learning JavaScript Design Patterns by Addy Osmani</a></p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>No dependencies</li>
<li>Small &amp; Fast</li>
<li>Topic &amp; Message subscriptions</li>
<li>Subtopics</li>
</ul><h2>
<a name="syntax" class="anchor" href="#syntax"><span class="octicon octicon-link"></span></a>Syntax</h2>

<p>You can start using PubSub right away or you can create new instances from it.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'topic'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// the subscription argument is an object with the following properties</span>
    <span class="c1">// @topic {String} the topic that we are listening to, in this case "topic"</span>
    <span class="c1">// @message {Anything} the message we were listening for, if any, in this case undefined</span>
    <span class="c1">// @token {String} the unique ID for this subscription, used for unsubscribing</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'"topic" was published with message "'</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s1">'"'</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>And then..</p>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'topic'</span><span class="p">);</span> <span class="c1">// =&gt; "topic" was published with message "undefined"</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'topic'</span><span class="p">,</span> <span class="s1">'a message'</span><span class="p">);</span> <span class="c1">// =&gt; "topic" was published with message "a message"</span>
</pre></div>

<p>Creating a new PubSub instance for use, let's say, with a specific module.
Functionality and syntax stay the same.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">MyModule</span><span class="p">.</span><span class="nx">PubSub</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PubSub</span><span class="p">();</span>
</pre></div>

<p>Passing some options in our PubSub:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">Events</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PubSub</span><span class="p">({</span>
    <span class="s1">'subtopics'</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// true is the default value</span>
    <span class="s1">'subtopic_marker'</span><span class="o">:</span> <span class="s1">'--'</span> <span class="c1">// the default is ":"</span>
<span class="p">});</span>

<span class="nx">Events</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'topic'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">subscription</span><span class="p">.</span><span class="nx">topic</span> <span class="o">+</span> <span class="s1">' was published: '</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<p>And then..</p>

<div class="highlight highlight-javascript"><pre><span class="nx">Events</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'topic--childtopic--extradeeptopic'</span><span class="p">,</span> <span class="s1">'some message'</span><span class="p">);</span>
<span class="c1">// =&gt; "topic was published: some message"</span>

<span class="nx">Events</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'topic--childtopic'</span><span class="p">,</span> <span class="s1">'some message'</span><span class="p">);</span>
<span class="c1">// =&gt; "topic was published: some message"</span>

<span class="nx">Events</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'topic'</span><span class="p">,</span> <span class="s1">'some message'</span><span class="p">);</span>
<span class="c1">// =&gt; "topic was published: some message"</span>
</pre></div>

<p>Subtopics allow you to in a way "bubble" published messages so that you can
do things like this:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">change</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Something has changed from '</span>  <span class="o">+</span> <span class="nx">change</span><span class="p">.</span><span class="nx">from</span> <span class="o">+</span> <span class="s1">' to '</span> <span class="o">+</span> <span class="nx">change</span><span class="p">.</span><span class="nx">to</span> <span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change:name'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">change</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'My name has changed from '</span> <span class="o">+</span> <span class="nx">change</span><span class="p">.</span><span class="nx">from</span> <span class="o">+</span> <span class="s1">' to '</span> <span class="o">+</span> <span class="nx">change</span><span class="p">.</span><span class="nx">to</span> <span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'change:name'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">'from'</span><span class="o">:</span> <span class="s1">'A'</span><span class="p">,</span>
    <span class="s1">'to'</span><span class="o">:</span> <span class="s1">'B'</span>
<span class="p">});</span>

<span class="c1">// =&gt; My name has changed from A to B</span>
<span class="c1">// =&gt; Something has changed from A to B</span>
</pre></div>

<h3>
<a name="unsubscribing" class="anchor" href="#unsubscribing"><span class="octicon octicon-link"></span></a>Unsubscribing</h3>

<h4>
<a name="by-token-1" class="anchor" href="#by-token-1"><span class="octicon octicon-link"></span></a>By token (1)</h4>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Another click'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'click'</span><span class="p">);</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span>
</pre></div>

<h4>
<a name="by-token-2" class="anchor" href="#by-token-2"><span class="octicon octicon-link"></span></a>By token (2)</h4>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Another click'</span><span class="p">);</span>
    <span class="nx">PubSub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">subscription</span><span class="p">.</span><span class="nx">token</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'click'</span><span class="p">);</span>
</pre></div>

<h4>
<a name="by-topic" class="anchor" href="#by-topic"><span class="octicon octicon-link"></span></a>By topic</h4>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'click'</span><span class="p">);</span> <span class="c1">// Remove all click topics</span>
</pre></div>

<h3>
<a name="topic--messages" class="anchor" href="#topic--messages"><span class="octicon octicon-link"></span></a>Topic &amp; Messages</h3>

<p>You can subscribe to a topic &amp; message combination, when you only care about a specific message.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Something has changed!'</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">opts</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'My'</span><span class="p">,</span> <span class="nx">message</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">(),</span> <span class="s1">'has changed!'</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
    <span class="c1">// subscription.message === message === name</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">'from'</span><span class="o">:</span> <span class="s1">'A'</span><span class="p">,</span>
    <span class="s1">'to'</span><span class="o">:</span> <span class="s1">'B'</span>
<span class="p">});</span>

<span class="c1">// =&gt; 'My NAME has changed!' { 'from': 'A', 'to': 'B' }</span>
<span class="c1">// =&gt; 'Something has changed!' name { 'from': 'A', 'to': 'B' }</span>
</pre></div>

<h3>
<a name="subtopics" class="anchor" href="#subtopics"><span class="octicon octicon-link"></span></a>Subtopics</h3>

<p>Subtopics provide a similar functionality as topic-message combination, in that they provide another level of specifity when subscribing and publishing.</p>

<p>In both cases the publish event bubbles up to the parent topic.</p>

<div class="highlight highlight-javascript"><pre><span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Something has changed!'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">'change:name'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subscription</span><span class="p">,</span> <span class="nx">message</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'My name has changed!'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">PubSub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s1">'change:name'</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">'from'</span><span class="o">:</span> <span class="s1">'A'</span><span class="p">,</span>
    <span class="s1">'to'</span><span class="o">:</span> <span class="s1">'B'</span>
<span class="p">});</span>

<span class="c1">// =&gt; 'My name has changed!' { 'from': 'A', 'to': 'B' }</span>
<span class="c1">// =&gt; 'Something has changed!' { 'from': 'A', 'to': 'B' }</span>
</pre></div>

<h2>
<a name="other-pubsub-js-libraries" class="anchor" href="#other-pubsub-js-libraries"><span class="octicon octicon-link"></span></a>Other PubSub JS libraries</h2>

<ul>
<li><a href="https://gist.github.com/661855">https://gist.github.com/661855</a></li>
<li><a href="https://github.com/mroderick/PubSubJS">https://github.com/mroderick/PubSubJS</a></li>
<li><a href="https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js">https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js</a></li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/essentialed">essentialed</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>